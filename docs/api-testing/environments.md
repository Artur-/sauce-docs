---
id: environments
title: Creating Environments for Tests
sidebar_label: Environments
description: Mix and match your test settings
---

import useBaseUrl from '@docusaurus/useBaseUrl';

An environment is a collection of override variables. An override variable is a variable that will replace the value of a variable that has been stored within the vault or the test itself, during a predefined session.

If properly set up, any API Testing test can be run against any environment. This can be achieved by turning the URL and any other part into variables that can be overridden using the environments.â€¨ This allows you, for example, to set the default location as input and override those amounts with the environments feature without actually changing the test.

The Sauce labs API Testing Environments feature lets you change anything, not just environments. You can run the test against a certain environment, using a different API key, or datasource. This effectively allows you to have pre-set runtime variable overrides.

:::note
Use Environments to change the values of the variable scope generated by the Vault + Input sets.
Parameterize things that can actually change, and leave everything else as static strings.
:::

## What You'll Need
* An existing API Testing project and test. For details on how to create them, see [API Testing Quickstart](/api-testing/quickstart/).
* Recommended: Review [Creating Reusable Variables and Snippets with the Vault](/api-testing/vault/)

## Creating Environments

Once a domain is parameterized, you can override a variable if needed.

You can create and access test environments from the project or from the test.

### From a Project
1. In Sauce Labs, click **API Testing**.

2. On the **Projects** page, click a project.

3. On the project details page, click the **Environments** tab.

<img src={useBaseUrl('img/api-fortress/2021/04/accessEnvironment.png')} alt="access environment"/>

4. Click **Create**.

<img src={useBaseUrl('img/api-testing/placeholder-image.png')} alt="placeholder"/>

3. Enter a name for your environment, then click **Save** when finished.

<img src={useBaseUrl('img/api-fortress/2021/04/createEnvironment.png')} alt="create environment" width="300"/>

4. From here, you can:
   * Add variable(s) manually by clicking **New Entry** > Enter **Key** and **Value** pairs > **Confirm**.<br/><img src={useBaseUrl('img/api-fortress/2021/04/manualEntry.png')} alt="create environment" width="500"/>
   * Import an existing environment by clicking **Import** > **Choose File** (accepted file types are Postman, .json, .csv).<br/><img src={useBaseUrl('img/api-fortress/2021/04/importEnv.png')} alt="create environment" width="500"/>

The resulting environment (along with its defined variables) will now appear each of your Tests as an option in the environment dropdown.

### From a Test
1. Locate your desired test from any of the following sections: **Tests**, **Compose**, or **HTTP Client**.
2. Under **Run Configuration**, click the **No environment** dropdown.
3. Select **Add item**.
4. Enter a name for your environment, then click **Confirm**.
5. Click **Create variable**, enter **Key** and **Value** pairs, then click **Confirm**.
6. When you're finished adding variables, click the **Close Environments Editor** icon.<br/><img src={useBaseUrl('img/api-fortress/2021/04/closeEditor.png')} alt="create environment" width="300"/>

This new environment will be selected by default in the dropdown.

## Using Environments
Once you've created an environment and added your variables, you can run your test against that environment.

1. Locate your desired test from any of the following sections: **Tests**, **Compose**, or **HTTP Client**.
2. Under **Run Configuration**, click the **No environment** dropdown, and select the name of the environment you created.

<img src={useBaseUrl('img/api-fortress/2021/04/selectEnv.png')} alt="result in tests" width="300"/>

By activating an environment here, you will be able to hit a different variable (key/value pair) in your current session without actually changing your test.

### no environment
If **None** (**no environment**) is selected, the Test will run using the values written as inputs in the test and the variables saved in the **Vault**.

<img src={useBaseUrl('img/api-fortress/2021/04/noEnv.png')} alt="result in tests" width="270"/>

### Loading Environments
If you begin using environments heavily, the integration using the APIF API (or any CI/CD plugin) may become overly complex, as lots of data will need to be copied around.

For this reason, we have introduced a special override variable, `apif_env`, which tells our API to load a specific environment when invoking a test using the API. For example, to load the `staging` environment and all its override variables:

```bash
apif_env: staging
```

## More Information
* [API Fortress Legacy Migration Guide](/api-testing/legacy)
